:root{
  --bg: #0f1115;
  --panel: #171a21;
  --muted: #8a93a6;
  --text: #eaeef7;
  --accent: #6aa3ff;
  --accent-2: #4bd3c2;
  --danger: #ff6b6b;
  --ok: #38d973;
  --grid: #2a2f3a;
  --thick: #454c5b;
  --cell: #1b2030;
  --cell-alt: #1e2435;
  --sel: #28324a;
  --hl: #22293a;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius: 18px;
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
  color:var(--text);
  background: radial-gradient(1200px 800px at 70% -10%, #1b2030 0%, #0f1115 60%);
}

.app-header, .app-footer{
  max-width: 980px;
  margin: 0 auto;
  padding: 16px;
}

.app-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
}
h1{
  margin:0;
  font-weight:700;
  letter-spacing:.5px;
}

.status-bar{
  display:flex;
  gap:10px;
  align-items:center;
}
.pill{
  background:linear-gradient(180deg, #263149, #1b2234);
  padding:6px 10px;
  border-radius:999px;
  border:1px solid #2c3550;
  color:var(--muted);
  font-size:.85rem;
}

.app-main{
  max-width:980px;
  margin:0 auto;
  padding: 8px 16px 24px;
  display:grid;
  grid-template-columns: 1fr;
  gap:16px;
}

.board-wrap{
  display:flex;
  justify-content:center;
}

.board{
  width:min(92vw, 560px);
  height:min(92vw, 560px);
  display:grid;
  grid-template-columns: repeat(9, 1fr);
  grid-template-rows: repeat(9, 1fr);
  background: var(--panel);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow:hidden;
  position:relative;
}
.cell{
  position:relative;
  background:var(--cell);
  border: 1px solid var(--grid);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: clamp(18px, 4.2vw, 28px);
  line-height:1;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}
.cell:nth-child(odd){ background: var(--cell-alt); }

.cell.given{
  color:#c9d2ea;
  font-weight:700;
}
.cell.editable{
  cursor:pointer;
}
.cell.selected{
  background: var(--sel);
  outline: 2px solid #5e76b9;
  outline-offset: -2px;
}
.cell.same{
  background: var(--hl);
}
.cell.conflict{
  background: rgba(255, 107, 107, .12);
  border-color: #7b3c3c;
}
.notes{
  position:absolute;
  inset:0;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  font-size: clamp(8px, 2.2vw, 12px);
  color:#a9b1c9;
  gap:1px;
  padding:3px;
}
.note{
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:.9;
}

.board::before, .board::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* Líneas gruesas 3x3 */
.board .cell{
  box-shadow:
    0 -2px 0 0 var(--thick) inset,
    -2px 0 0 0 var(--thick) inset;
}
.board .cell:nth-child(9n+1){ box-shadow: -2px 0 0 0 var(--thick) inset, 0 -2px 0 0 var(--thick) inset; }
.board .cell:nth-child(-n+9){ box-shadow: 0 -2px 0 0 var(--thick) inset, -2px 0 0 0 var(--thick) inset; }
.board .cell:nth-child(9n){ box-shadow: 2px 0 0 0 var(--thick) inset, 0 -2px 0 0 var(--thick) inset; }
.board .cell:nth-child(n+73){ box-shadow: 0 2px 0 0 var(--thick) inset, -2px 0 0 0 var(--thick) inset; }
/* líneas divisorias de subcuadros */
.board .cell:nth-child(27n+1),
.board .cell:nth-child(27n+2),
.board .cell:nth-child(27n+3),
.board .cell:nth-child(27n+4),
.board .cell:nth-child(27n+5),
.board .cell:nth-child(27n+6),
.board .cell:nth-child(27n+7),
.board .cell:nth-child(27n+8),
.board .cell:nth-child(27n+9){
  /* fila superior de cada bloque 3x3 ya está con -2px */
}
.board .cell:nth-child(n+19):nth-child(-n+27),
.board .cell:nth-child(n+46):nth-child(-n+54){
  /* nada, visual ya ok */
}

.toolbar{
  display:flex;
  justify-content:center;
}
.toolbar .row{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  align-items:center;
  background: var(--panel);
  padding: 10px;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.segmented{
  display:inline-grid;
  grid-template-columns: 1fr 1fr 1fr;
  background:#141926;
  border:1px solid #2e3546;
  border-radius: 999px;
  overflow:hidden;
  margin-right: 6px;
}
.segmented input[type="radio"]{ display:none; }
.segmented span{
  padding:8px 12px;
  color:var(--muted);
  text-align:center;
  cursor:pointer;
  transition: background .2s ease, color .2s ease;
  user-select:none;
}
.segmented input[type="radio"]:checked + span{
  background:#1e2638;
  color:var(--text);
  font-weight:600;
}

.btn{
  background:#1a2030;
  border:1px solid #2a3145;
  border-radius: 12px;
  padding:8px 12px;
  color:var(--text);
  cursor:pointer;
  transition: transform .02s ease, background .2s ease, border-color .2s ease;
}
.btn:active{ transform: translateY(1px); }
.btn[aria-pressed="true"], .btn.primary{
  background: linear-gradient(180deg, #2b3754, #22304d);
  border-color:#364468;
}
.btn:hover{ background:#202740; }

.numpad{
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap:10px;
  max-width: 560px;
  margin: 0 auto;
}
.key{
  font-size: clamp(18px, 5vw, 22px);
  padding: 14px 0;
  border-radius: 14px;
  border:1px solid #2a3145;
  background:#171d2b;
  color:var(--text);
  box-shadow: var(--shadow);
}
.key:active{ transform: translateY(1px); }
.key.wide{ grid-column: span 2; }

.message{
  text-align:center;
  min-height: 1.2em;
  color: var(--muted);
}

.app-footer{
  text-align:center;
  color:var(--muted);
  opacity:.9;
}

/* Responsive tweaks */
@media (min-width: 820px){
  .app-main{
    grid-template-columns: 1fr;
  }
}
